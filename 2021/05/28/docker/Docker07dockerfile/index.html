<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="大白小怪兽">
    
    <title>
        
            Dockerfile |
        
        大白小怪兽
    </title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="shortcut icon" href="/images/blog.png">
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/css/font-awesome.min.css">
    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"blog.sky123.top","root":"/","language":"zh-CN","path":"search.xml"};
    KEEP.theme_config = {"toc":{"enable":true,"number":false,"expand_all":true,"init_open":true},"style":{"primary_color":"#f22f27","avatar":"/images/avatar.jpg","favicon":"/images/blog.png","article_img_align":"center","left_side_width":"240px","content_max_width":"940px","hover":{"shadow":true,"scale":false},"first_screen":{"enable":true,"background_img":"/images/bg.svg","description":"乐于有所得，苦于无知"},"scroll":{"progress_bar":{"enable":true},"percent":{"enable":true}}},"local_search":{"enable":true,"trigger":"auto","unescape":false,"preload":true},"code_copy":{"enable":true,"style":"default"},"pjax":{"enable":true},"lazyload":{"enable":true},"version":"3.4.1"};
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 月前","year":"%s 年前"};
  </script>
<meta name="generator" content="Hexo 5.4.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head>


<body>
<div class="progress-bar-container">
    
        <span class="scroll-progress-bar"></span>
    

    
        <span class="pjax-progress-bar"></span>
        <span class="pjax-progress-icon">
            <i class="fas fa-circle-notch fa-spin"></i>
        </span>
    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            <a class="logo-title" href="/">
                大白小怪兽
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/"
                            >
                                首页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/archives"
                            >
                                归档
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/tags"
                            >
                                标签
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/about"
                            >
                                关于
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/">首页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/archives">归档</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/tags">标签</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/about">关于</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        
            <div class="article-cover">
                <img class="cover" src=https://img.sky123.top/img/river-219972_1280.jpg>
            </div>
        
        <div class="article-title">
            <span class="title-hover-animation">Dockerfile</span>
        </div>
        
            <div class="article-header">
                <div class="info">
                    <div class="meta-info">
                        <div class="article-meta-info">
    <!--日期-->
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;2021-05-28
    </span>

    <!--字数统计-->
    
    
        <span class="article-wordcount article-meta-item">
            <i class="fas fa-file-word"></i>&nbsp;<span>1.9k 字</span>
        </span>
    

    <!--阅读时长-->
    
        <span class="article-min2read article-meta-item">
            <i class="fas fa-clock"></i>&nbsp;<span>10 分钟</span>
        </span>
    

    <!--阅读人数-->
    

    <!--分类-->
    

    <!--标签-->
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/tags/Docker/">Docker</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/tags/Linux/">Linux</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <h1>Dockerfile</h1>
<h2 id="什么是 DockerfIle">什么是 DockerfIle?</h2>
<p>Dockerfile 就是用来 <code> 构建 Docker 镜像 </code> 的构建文件。一种命令脚本。<code>通过这个脚本可以生成镜像，镜像是一层层的，脚本也是一个个的，每个命令都是一层。</code></p>
<h2 id="创建 Dockerfile">创建 Dockerfile</h2>
<p>创建一个 dokcerfile 文件，名字建议为 <code>Dockerfile</code>。</p>
<figure class="highlight dockerfile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> centos</span><br><span class="line"></span><br><span class="line"><span class="keyword">VOLUME</span><span class="bash"> [<span class="string">"volume01"</span>,<span class="string">"volume02"</span>] <span class="comment"># 匿名挂载</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"----end---"</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> /bin/bash</span></span><br></pre></td></tr></tbody></table></figure>
<p>将 <code>Dockerfile</code> 文件导入服务器后，执行 <code>build</code> 指令。</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># docker build -f Dockerfile 文件路径 -t 自己定的镜像名:[tag] .（注意这里有个“ . ”!!!）</span></span><br></pre></td></tr></tbody></table></figure>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 注意一定要切换到  dockerfile 所在的目录再进行构建！！</span></span><br><span class="line">[root@izwz91mv6i3x6k12jjqh60z /]<span class="comment"># cd /home/test</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 执行命令</span></span><br><span class="line">[root@izwz91mv6i3x6k12jjqh60z <span class="built_in">test</span>]<span class="comment"># docker build -f /home/test/Dockerfile -t zhang_new_centos:1.0 .</span></span><br><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line">Step 1/4 : FROM centos</span><br><span class="line"> ---&gt; 300e315adb2f</span><br><span class="line">Step 2/4 : VOLUME [<span class="string">"volume01"</span>,<span class="string">"volume02"</span>]</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 07ae0ca19fa0</span><br><span class="line">Removing intermediate container 07ae0ca19fa0</span><br><span class="line"> ---&gt; 03b0163200ef</span><br><span class="line">Step 3/4 : CMD <span class="built_in">echo</span> <span class="string">"----end---"</span></span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> b37d23b71e98</span><br><span class="line">Removing intermediate container b37d23b71e98</span><br><span class="line"> ---&gt; c11c71b6fbb8</span><br><span class="line">Step 4/4 : CMD /bin/bash</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 55037d2fbe2e</span><br><span class="line">Removing intermediate container 55037d2fbe2e</span><br><span class="line"> ---&gt; ffc16328649d</span><br><span class="line">Successfully built ffc16328649d</span><br><span class="line">Successfully tagged zhang_new_centos:1.0</span><br><span class="line"></span><br><span class="line"><span class="comment"># 查看构建完成的镜像</span></span><br><span class="line">[root@izwz91mv6i3x6k12jjqh60z <span class="built_in">test</span>]<span class="comment"># docker images</span></span><br><span class="line">REPOSITORY            TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">zhang_new_centos      1.0       ffc16328649d   10 seconds ago   209MB</span><br><span class="line"></span><br><span class="line"><span class="comment"># 启动自己写的容器</span></span><br><span class="line">[root@izwz91mv6i3x6k12jjqh60z <span class="built_in">test</span>]<span class="comment"># docker run -it ffc16328649d /bin/bash</span></span><br><span class="line">[root@967d6456ecb1 /]<span class="comment"># ls -l</span></span><br><span class="line">total 56</span><br><span class="line">.........</span><br><span class="line">drwxr-xr-x   2 root root 4096 May 14 08:27 volume01   <span class="comment"># 这目录就是我们生成镜像时自动挂载的数据卷目录</span></span><br><span class="line">drwxr-xr-x   2 root root 4096 May 14 08:27 volume02   <span class="comment"># 这目录就是我们生成镜像时自动挂载的数据卷目录</span></span><br></pre></td></tr></tbody></table></figure>
<p>这两个卷一定和主机有同步目录</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@izwz91mv6i3x6k12jjqh60z <span class="built_in">test</span>]<span class="comment"># docker ps</span></span><br><span class="line">CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS          PORTS                                       NAMES</span><br><span class="line">967d6456ecb1   ffc16328649d   <span class="string">"/bin/bash"</span>              4 minutes ago    Up 4 minutes                                                sharp_goldberg</span><br><span class="line">264b185cbccc   nginx          <span class="string">"/docker-entrypoint.…"</span>   49 minutes ago   Up 49 minutes   0.0.0.0:49154-&gt;80/tcp, :::49154-&gt;80/tcp     nginx02</span><br><span class="line">0f3e16361a94   nginx          <span class="string">"/docker-entrypoint.…"</span>   50 minutes ago   Up 50 minutes   0.0.0.0:49153-&gt;80/tcp, :::49153-&gt;80/tcp     nginx01</span><br><span class="line">1309cabd368d   centos         <span class="string">"/bin/bash"</span>              4 hours ago      Up 4 hours                                                  epic_neumann</span><br><span class="line">39f11d68d64d   tomcat         <span class="string">"catalina.sh run"</span>        6 hours ago      Up 6 hours      0.0.0.0:8080-&gt;8080/tcp, :::8080-&gt;8080/tcp   tomcat02</span><br><span class="line">[root@izwz91mv6i3x6k12jjqh60z <span class="built_in">test</span>]<span class="comment"># docker inspect 967d6456ecb1</span></span><br></pre></td></tr></tbody></table></figure>
<p><img lazyload="" src="/images/loading.svg" data-src="https://img.sky123.top/img/image-20210514163246336.png" alt="image-20210514163246336"></p>
<h2 id="镜像发布步骤">镜像发布步骤</h2>
<p>注意：很多官方镜像都是基础包，我们通常需要搭建自己的镜像</p>
<ol>
<li>编写 <code>Dockerfile</code></li>
<li><code>docker build</code> 构建一个镜像</li>
<li><code>docker run</code> 运行一个镜像</li>
<li><code>docker push</code> 发布镜像（DockerHub ，阿里云镜像仓库）</li>
</ol>
<h2 id="Dockerfile 编写过程">Dockerfile 编写过程</h2>
<p>每一个指令都会提交一个新的镜像层，并提交。</p>
<p>我们以后发布项目做镜像，就需要编写 <code>Dockerfile</code> 文件。</p>
<h3 id="Dockerfile 指令">Dockerfile 指令</h3>
<p><img lazyload="" src="/images/loading.svg" data-src="https://img.sky123.top/img/image-20210221215126162.png" alt="image-20210221215126162"></p>
<h3 id="编写 Dockerfile 文件">编写 Dockerfile 文件</h3>
<ol>
<li>对于官方的精简 OS，对其进行扩展，添加 <code>vim 命令和 net-tools</code></li>
</ol>
<figure class="highlight dockerfile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> centos</span><br><span class="line"><span class="keyword">MAINTAINER</span> zhang&lt;<span class="number">1404644784</span>@qq.com&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置工作目录</span></span><br><span class="line"><span class="keyword">ENV</span> MYPATH /usr/local </span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> <span class="variable">$MYPATH</span></span></span><br><span class="line"><span class="comment"># 安装两个工具</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> yum -y install vim</span></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> yum -y install net-tools</span></span><br><span class="line"><span class="comment"># 暴露端口</span></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">80</span></span><br><span class="line"><span class="comment"># 执行命令</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> <span class="built_in">echo</span> <span class="variable">$MYPATH</span></span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> <span class="built_in">echo</span> <span class="string">"---END----"</span></span></span><br><span class="line"><span class="comment"># 打开终端</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> /bin/bash</span></span><br></pre></td></tr></tbody></table></figure>
<ol start="2">
<li>
<p>导入 Dockerfile 文件到服务器之后，到其所在的目录中执行如下指令：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[root@izwz91mv6i3x6k12jjqh60z <span class="built_in">test</span>]<span class="comment"># docker build -t new_ceontos:1.2 .</span></span><br><span class="line">Sending build context to Docker daemon  2.048kB</span><br><span class="line">Step 1/10 : FROM centos</span><br><span class="line"> ---&gt; 300e315adb2f</span><br><span class="line">Step 2/10 : MAINTAINER zhang&lt;1404644784@qq.com&gt;</span><br><span class="line"> ---&gt; Running <span class="keyword">in</span> 1eff578beeaa</span><br><span class="line">Removing intermediate container 1eff578beeaa</span><br><span class="line"> ---&gt; 8b55dbb5776a</span><br><span class="line">Step 3/10 : ENV MYPATH /usr/<span class="built_in">local</span></span><br><span class="line">.......</span><br><span class="line">Step 10/10 : CMD /bin/bash</span><br><span class="line">Successfully built 30e7e21aa1ad</span><br><span class="line">Successfully tagged new_ceontos:1.2</span><br></pre></td></tr></tbody></table></figure>
</li>
<li>
<p>查看效果：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@izwz91mv6i3x6k12jjqh60z <span class="built_in">test</span>]<span class="comment"># docker run -it new_ceontos:1.2</span></span><br><span class="line"><span class="comment"># 发现工作目录是 /usr/local</span></span><br><span class="line">[root@653b95461f2b <span class="built_in">local</span>]<span class="comment"># pwd</span></span><br><span class="line">/usr/<span class="built_in">local</span></span><br><span class="line"><span class="comment"># 一些命令也可以执行</span></span><br><span class="line">[root@653b95461f2b <span class="built_in">local</span>]<span class="comment"># ifconfig</span></span><br><span class="line">eth0: flags=4163&lt;UP,BROADCAST,RUNNING,MULTICAST&gt;  mtu 1500</span><br><span class="line">        inet 172.18.0.6  netmask 255.255.0.0  broadcast 172.18.255.255</span><br><span class="line">        ether 02:42:ac:12:00:06  txqueuelen 0  (Ethernet)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">lo: flags=73&lt;UP,LOOPBACK,RUNNING&gt;  mtu 65536</span><br><span class="line">        inet 127.0.0.1  netmask 255.0.0.0</span><br><span class="line">        loop  txqueuelen 1  (Local Loopback)</span><br><span class="line">        RX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        RX errors 0  dropped 0  overruns 0  frame 0</span><br><span class="line">        TX packets 0  bytes 0 (0.0 B)</span><br><span class="line">        TX errors 0  dropped 0 overruns 0  carrier 0  collisions 0</span><br><span class="line"></span><br><span class="line">[root@653b95461f2b <span class="built_in">local</span>]<span class="comment"># vim</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">~                                                                                                                                               </span><br><span class="line">~                                                                                           </span><br></pre></td></tr></tbody></table></figure>
</li>
<li>
<p>查看镜像的构建历史：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@izwz91mv6i3x6k12jjqh60z <span class="built_in">test</span>]<span class="comment"># docker history new_ceontos:1.2</span></span><br><span class="line">IMAGE          CREATED          CREATED BY                                      SIZE      COMMENT</span><br><span class="line">30e7e21aa1ad   11 minutes ago   /bin/sh -c <span class="comment">#(nop)  CMD ["/bin/sh" "-c" "/bin…   0B        </span></span><br><span class="line">76922605002d   11 minutes ago   /bin/sh -c <span class="comment">#(nop)  CMD ["/bin/sh" "-c" "echo…   0B        </span></span><br><span class="line">a700583c8e1f   11 minutes ago   /bin/sh -c <span class="comment">#(nop)  CMD ["/bin/sh" "-c" "echo…   0B        </span></span><br><span class="line">84455e325565   11 minutes ago   /bin/sh -c <span class="comment">#(nop)  EXPOSE 80                    0B        </span></span><br><span class="line">549ff08ad87d   11 minutes ago   /bin/sh -c yum -y install net-tools             14.3MB    </span><br><span class="line">fc67fe1c8167   11 minutes ago   /bin/sh -c yum -y install vim                   58MB      </span><br><span class="line">4206512d4d06   11 minutes ago   /bin/sh -c <span class="comment">#(nop) WORKDIR /usr/local            0B        </span></span><br><span class="line">f49aff605737   11 minutes ago   /bin/sh -c <span class="comment">#(nop)  ENV MYPATH=/usr/local        0B        </span></span><br><span class="line">8b55dbb5776a   11 minutes ago   /bin/sh -c <span class="comment">#(nop)  MAINTAINER zhang&lt;14046447…   0B        </span></span><br><span class="line">300e315adb2f   5 months ago     /bin/sh -c <span class="comment">#(nop)  CMD ["/bin/bash"]            0B        </span></span><br><span class="line">&lt;missing&gt;      5 months ago     /bin/sh -c <span class="comment">#(nop)  LABEL org.label-schema.sc…   0B        </span></span><br><span class="line">&lt;missing&gt;      5 months ago     /bin/sh -c <span class="comment">#(nop) ADD file:bd7a2aed6ede423b7…   209MB    </span></span><br></pre></td></tr></tbody></table></figure>
</li>
</ol>
<h2 id="制作 Tomcat 镜像">制作 Tomcat 镜像</h2>
<ol>
<li>
<p>准备镜像文件 <code>tomcat 压缩包</code> ，<code>JDK 压缩包</code></p>
</li>
<li>
<p>将两个安装和 <code>Dockerfile</code> 文件导入服务器</p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://img.sky123.top/img/image-20210516155027189.png" alt="image-20210516155027189"></p>
</li>
<li>
<p>编写 Dockerfile 文件：</p>
<figure class="highlight dockerfile"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">FROM</span> centos</span><br><span class="line">MAINTAINET zhang&lt;<span class="number">1404644784</span>@qq.com&gt;</span><br><span class="line"><span class="keyword">COPY</span><span class="bash"> readme.txt /usr/<span class="built_in">local</span>/readme.txt</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> jdk-8u291-linux-x64.tar.gz /usr/<span class="built_in">local</span>/</span></span><br><span class="line"><span class="keyword">ADD</span><span class="bash"> apache-tomcat-10.0.6.tar.gz /usr/<span class="built_in">local</span>/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">RUN</span><span class="bash"> yum -y install vim</span></span><br><span class="line"><span class="keyword">ENV</span> MYPATH /usr/local</span><br><span class="line"><span class="keyword">WORKDIR</span><span class="bash"> <span class="variable">$MYPATH</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">ENV</span> JAVA_HOME /usr/local/jdk1.<span class="number">8.0</span>_291</span><br><span class="line"><span class="keyword">ENV</span> CLASSPATH $JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span><br><span class="line"><span class="keyword">ENV</span> CATALINA_HOME /usr/local/apache-tomcat-<span class="number">10.0</span>.<span class="number">6</span></span><br><span class="line"><span class="keyword">ENV</span> CATALINA_BASH /usr/local/apache-tomcat-<span class="number">10.0</span>.<span class="number">6</span></span><br><span class="line"><span class="keyword">ENV</span> PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:CATALINA_HOME/bin</span><br><span class="line"></span><br><span class="line"><span class="keyword">EXPOSE</span> <span class="number">8080</span></span><br><span class="line"><span class="keyword">CMD</span><span class="bash"> /usr/<span class="built_in">local</span>/apache-tomcat-10.0.6/bin/startup.sh &amp;&amp; tail -F /usr/<span class="built_in">local</span>/apache-tomcat-10.0.6/bin/logs/catalina.out</span></span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>
</li>
<li>
<p>构建镜像</p>
<figure class="highlight plain"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@izwz91mv6i3x6k12jjqh60z test]# ls</span><br><span class="line">apache-tomcat-10.0.6.tar.gz  dockerfile  jdk-8u291-linux-aarch64.tar.gz</span><br><span class="line"></span><br><span class="line">[root@izwz91mv6i3x6k12jjqh60z test]# docker build -t diytomcat:1.0 .</span><br></pre></td></tr></tbody></table></figure>
<p><img lazyload="" src="/images/loading.svg" data-src="https://img.sky123.top/img/image-20210516155148513.png" alt="image-20210516155148513"></p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://img.sky123.top/img/image-20210516155219412.png" alt="image-20210516155219412"></p>
</li>
<li>
<p>启动镜像，访问测试</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@izwz91mv6i3x6k12jjqh60z <span class="built_in">test</span>]<span class="comment"># docker run -d -p 8080:8080 --name test-tomcat -v /home/test/index:/usr/local/apache-tomcat-10.0.6/webapps/test -v /home/test/tomcat-logs/:/usr/local/apache-tomcat-10.0.6/logs diytomcat:1.0</span></span><br><span class="line"></span><br><span class="line">599b8cced9e5026b009a25b993dce1fa51ab2a8523f6604a96202158fb84db16</span><br></pre></td></tr></tbody></table></figure>
<p><img lazyload="" src="/images/loading.svg" data-src="https://img.sky123.top/img/image-20210516164942941.png" alt="image-20210516164942941"></p>
</li>
<li>
<p>发布项目（由于做了卷挂载，我们可以直接在本地编写项目就可以发布了）：</p>
<p>在主机目录部署一个静态项目测试：</p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://img.sky123.top/img/image-20210516170652430.png" alt="image-20210516170652430"></p>
<p>由于我们之前挂载的是 <code>webapps/test</code>，所以外网访问 <code>ip:8080/test</code> 就可以看到效果了。</p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://img.sky123.top/img/image-20210516170841699.png" alt="image-20210516170841699"></p>
</li>
</ol>
<h2 id="发布自己的镜像">发布自己的镜像</h2>
<h3 id="在 DockerHub 上发布">在 DockerHub 上发布</h3>
<ol>
<li>
<p>注册一个账号。地址：<a class="link" target="_blank" rel="noopener" href="https://hub.docker.com/">https://hub.docker.com/<i class="fas fa-external-link-alt"></i></a></p>
</li>
<li>
<p>在服务器上登陆 Docker</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@izwz91mv6i3x6k12jjqh60z ~]<span class="comment"># docker login --help</span></span><br><span class="line"></span><br><span class="line">Usage:  docker login [OPTIONS] [SERVER]</span><br><span class="line"></span><br><span class="line">Log <span class="keyword">in</span> to a Docker registry.</span><br><span class="line">If no server is specified, the default is defined by the daemon.</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -p, --password string   Password</span><br><span class="line">      --password-stdin    Take the password from stdin</span><br><span class="line">  -u, --username string   Username</span><br></pre></td></tr></tbody></table></figure>
</li>
<li>
<p>在我们的服务器上提交自己的镜像（ <code>此时镜像的名字要改成 ---- 用户名 / 镜像名</code> ）</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 直接推送会导致拒绝</span></span><br><span class="line">[root@izwz91mv6i3x6k12jjqh60z ~]<span class="comment"># docker push diytomcat:1.0</span></span><br><span class="line">The push refers to repository [docker.io/library/diytomcat]</span><br><span class="line">a060fcb7eeae: Preparing </span><br><span class="line">68c5e3b0f4b8: Preparing </span><br><span class="line">0593ccf15be8: Preparing </span><br><span class="line">31211d2560f3: Preparing </span><br><span class="line">2653d992f4ef: Preparing </span><br><span class="line">denied: requested access to the resource is denied</span><br><span class="line"></span><br><span class="line"><span class="comment"># 生成一个 用户名 / 镜像名 的镜像再把这个镜像推上去</span></span><br><span class="line">[root@izwz91mv6i3x6k12jjqh60z ~]<span class="comment"># docker tag bc8ce317425c zhangruwang/diytomcat</span></span><br><span class="line">[root@izwz91mv6i3x6k12jjqh60z ~]<span class="comment"># docker images</span></span><br><span class="line">REPOSITORY              TAG       IMAGE ID       CREATED          SIZE</span><br><span class="line">diytomcat               1.0       bc8ce317425c   44 minutes ago   643MB</span><br><span class="line">diytomcat               latest    bc8ce317425c   44 minutes ago   643MB</span><br><span class="line">zhangruwang/diytomcat   latest    bc8ce317425c   44 minutes ago   643MB</span><br><span class="line">centos                  latest    300e315adb2f   5 months ago     209MB</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推送成功</span></span><br><span class="line">[root@izwz91mv6i3x6k12jjqh60z ~]<span class="comment"># docker push zhangruwang/diytomcat</span></span><br><span class="line">Using default tag: latest</span><br><span class="line">The push refers to repository [docker.io/zhangruwang/diytomcat]</span><br><span class="line">a060fcb7eeae: Pushed </span><br><span class="line">68c5e3b0f4b8: Pushed </span><br><span class="line">0593ccf15be8: Pushed </span><br><span class="line">31211d2560f3: Pushed </span><br><span class="line">2653d992f4ef: Pushed </span><br><span class="line">latest: digest: sha256:589e18e8e705f3a743ca7838301ec6b8f83c40f1e9b618315c6f4e584a4baaa7 size: 1374</span><br></pre></td></tr></tbody></table></figure>
<p><img lazyload="" src="/images/loading.svg" data-src="https://img.sky123.top/img/image-20210516174145349.png" alt="image-20210516174145349"></p>
</li>
<li>
<p>测试下载镜像：</p>
<figure class="highlight bash"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@izwz91mv6i3x6k12jjqh60z ~]<span class="comment"># docker pull zhangruwang/diytomcat</span></span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from zhangruwang/diytomcat</span><br><span class="line">Digest: sha256:589e18e8e705f3a743ca7838301ec6b8f83c40f1e9b618315c6f4e584a4baaa7</span><br><span class="line">Status: Image is up to date <span class="keyword">for</span> zhangruwang/diytomcat:latest</span><br><span class="line">docker.io/zhangruwang/diytomcat:latest</span><br></pre></td></tr></tbody></table></figure>
</li>
</ol>
<h3 id="在阿里云镜像上发布">在阿里云镜像上发布</h3>
<ol>
<li>
<p>登陆阿里云</p>
</li>
<li>
<p>找到容器镜像服务</p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://img.sky123.top/img/image-20210516174458107.png" alt="image-20210516174458107"></p>
</li>
<li>
<p>创建命名空间</p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://img.sky123.top/img/image-20210516174433215.png" alt="image-20210516174433215"></p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://img.sky123.top/img/image-20210516174630249.png" alt="image-20210516174630249"></p>
</li>
<li>
<p>创建容器镜像</p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://img.sky123.top/img/image-20210516174719504.png" alt="image-20210516174719504"></p>
<p><img lazyload="" src="/images/loading.svg" data-src="https://img.sky123.top/img/image-20210516174818648.png" alt="image-20210516174818648"></p>
</li>
<li>
<pre><code class="language-bash"># 登陆
[root@izwz91mv6i3x6k12jjqh60z ~]# sudo docker login --username=xxxx registry.cn-beijing.aliyuncs.com
Password: 
WARNING! Your password will be stored unencrypted in /root/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store

Login Succeeded

#添加 tag
[root@izwz91mv6i3x6k12jjqh60z ~]# sudo docker tag bc8ce317425c  registry.cn-beijing.aliyuncs.com/sky23333/diytomcat
[root@izwz91mv6i3x6k12jjqh60z ~]# docker images
REPOSITORY                                            TAG       IMAGE ID       CREATED             SIZE
diytomcat                                             1.0       bc8ce317425c   About an hour ago   643MB
diytomcat                                             latest    bc8ce317425c   About an hour ago   643MB
zhangruwang/diytomcat                                 latest    bc8ce317425c   About an hour ago   643MB
registry.cn-beijing.aliyuncs.com/sky23333/diytomcat   latest    bc8ce317425c   About an hour ago   643MB
centos                                                latest    300e315adb2f   5 months ago        209MB

#推送
[root@izwz91mv6i3x6k12jjqh60z ~]# sudo docker push registry.cn-beijing.aliyuncs.com/sky23333/diytomcat
Using default tag: latest
The push refers to repository [registry.cn-beijing.aliyuncs.com/sky23333/diytomcat]
a060fcb7eeae: Pushed 
68c5e3b0f4b8: Pushed 
0593ccf15be8: Pushed 
31211d2560f3: Pushed 
2653d992f4ef: Pushed 
latest: digest: sha256:589e18e8e705f3a743ca7838301ec6b8f83c40f1e9b618315c6f4e584a4baaa7 size: 1374
#拉取
[root@izwz91mv6i3x6k12jjqh60z ~]# sudo docker pull registry.cn-beijing.aliyuncs.com/sky23333/diytomcat
Using default tag: latest
latest: Pulling from sky23333/diytomcat
Digest: sha256:589e18e8e705f3a743ca7838301ec6b8f83c40f1e9b618315c6f4e584a4baaa7
Status: Image is up to date for registry.cn-beijing.aliyuncs.com/sky23333/diytomcat:latest
registry.cn-beijing.aliyuncs.com/sky23333/diytomcat:latest
</code></pre>
</li>
</ol>
<h2 id="总结">总结</h2>
<img lazyload="" src="/images/loading.svg" data-src="https://img.sky123.top/img/image-20210516175542014.png" alt="image-20210516175542014" style="zoom: 67%;">
        </div>

        

        
            <div class="article-nav">
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/2021/05/28/docker/Docker08docker%E7%BD%91%E7%BB%9C/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">Docker 网络</span>
                                <span class="post-nav-item">下一篇</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2020</span>&nbsp;-&nbsp;
            
            2021&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">大白小怪兽</a>
        </div>
        
        <div class="theme-info info-item">
            由 <a target="_blank" href="https://hexo.io">Hexo</a> 驱动&nbsp;|&nbsp;主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.1</a>
        </div>
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list show">
        <!--隐藏放大缩小字体和全屏模式-->
        <li class="tools-item tool-font-adjust-plus flex-center" style="display: none">
            <i class="fas fa-search-plus"></i>
        </li>
        <li class="tools-item tool-font-adjust-minus flex-center" style="display: none">
            <i class="fas fa-search-minus"></i>
        </li>
        <li class="tools-item tool-expand-width flex-center" style="display: none">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="arrow-up fas fa-arrow-up"></i>
                <span class="percent"></span>
            </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link"><span class="nav-text">Dockerfile</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%20DockerfIle"><span class="nav-text">什么是 DockerfIle?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%20Dockerfile"><span class="nav-text">创建 Dockerfile</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%95%9C%E5%83%8F%E5%8F%91%E5%B8%83%E6%AD%A5%E9%AA%A4"><span class="nav-text">镜像发布步骤</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Dockerfile%20%E7%BC%96%E5%86%99%E8%BF%87%E7%A8%8B"><span class="nav-text">Dockerfile 编写过程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Dockerfile%20%E6%8C%87%E4%BB%A4"><span class="nav-text">Dockerfile 指令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BC%96%E5%86%99%20Dockerfile%20%E6%96%87%E4%BB%B6"><span class="nav-text">编写 Dockerfile 文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%B6%E4%BD%9C%20Tomcat%20%E9%95%9C%E5%83%8F"><span class="nav-text">制作 Tomcat 镜像</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%91%E5%B8%83%E8%87%AA%E5%B7%B1%E7%9A%84%E9%95%9C%E5%83%8F"><span class="nav-text">发布自己的镜像</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%20DockerHub%20%E4%B8%8A%E5%8F%91%E5%B8%83"><span class="nav-text">在 DockerHub 上发布</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E9%98%BF%E9%87%8C%E4%BA%91%E9%95%9C%E5%83%8F%E4%B8%8A%E5%8F%91%E5%B8%83"><span class="nav-text">在阿里云镜像上发布</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-text">总结</span></a></li></ol></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>



<script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/utils.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/main.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/header-shrink.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/back2top.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/dark-light-toggle.js"></script>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/local-search.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/code-copy.js"></script>



    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/lazyload.js"></script>


<div class="post-scripts pjax">
    
        <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/left-side-toggle.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/libs/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/toc.js"></script>
    
</div>


    <script src="//cdn.jsdelivr.net/npm/hexo-theme-keep@3.4.1/source/js/libs/pjax.min.js"></script>
<script>
    window.addEventListener('DOMContentLoaded', () => {
        const pjax = new Pjax({
            selectors: [
                'head title',
                '.page-container',
                '.pjax'
            ],
            history: true,
            debug: false,
            cacheBust: false,
            timeout: 0,
            analytics: false,
            currentUrlFullReload: false,
            scrollRestoration: false,
            // scrollTo: true,
        });

        document.addEventListener('pjax:send', () => {
            KEEP.utils.pjaxProgressBarStart();
        });

        document.addEventListener('pjax:complete', () => {
            KEEP.utils.pjaxProgressBarEnd();
            pjax.executeScripts(document.querySelectorAll('script[data-pjax], .pjax script'));
            KEEP.refresh();
        });
    });
</script>



</body>
</html>
